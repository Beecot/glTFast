{% metadata_file .yamato/package.metafile -%}
---

pr_trigger:
  name: PR Trigger
  triggers:
    expression: |
      (pull_request.target eq "main" OR pull_request.target eq "develop") AND
      NOT pull_request.push.changes.all match "**/*.md"
  dependencies:
    - .yamato/package-pack.yml#pack
    - .yamato/package-test.yml#tests_pr
    - .yamato/package-player-test.yml#player_test_pr
    - .yamato/package-coverage.yml#tests_coverage_pr

tests_all_trigger:
  name: _Tests All
  triggers:
    expression: |
      push.branch eq "main" OR
      pull_request.comment eq "all" 
  dependencies:
    - .yamato/package-pack.yml#pack
    - .yamato/package-test.yml#tests_all
    - .yamato/package-player-test.yml#player_test_all
    - .yamato/package-coverage.yml#tests_coverage_all

tests_all_weekly:
  name: _Tests All [Weekly]
  triggers:
    recurring:
      - branch: develop
        frequency: weekly
        rerun: always
  dependencies:
    - .yamato/triggers.yml#tests_all_trigger
